## Usage

Install the package

```
npm install next-img
```

Add the plugin to your `next.config.js`:

```js
const withPlugins = require('next-compose-plugins')
const nextImg = require('next-img/plugin')

module.exports = withPlugins([
  nextImg,
  {
    // specify the default breakpoints
    breakpoints: [768],
  },
])
```

In your application, import the images and embed using the `<Picture />` component:

```js
import { Picture } from 'next-img'
import jelly from './images/jelly.jpg?sizes=375,800'

export default () => <Picture src={jelly} />
```

Or inline:

```js
import { Picture } from 'next-img'

export default () => <Picture src={require('./images/jelly.jpg?sizes=375,800')} />
```

This particular example will generate the following images:

- 375px wide image to show on small screens with low pixel density of 1x
- 750px wide image to show on small screens with high pixel density of 2x or more
- 800px wide image to show on large screens with low pixel density of 1x
- 1600px wide image to show on large screens with high pixel density of 2x or more

The resized and optimized images will be saved to the `resources` directory in the root of your project during the development. This means, that if you tweak the image import parameters or plugin configuration, you might generate extra images that are no longer used by your project. In that case execute `next-img` command to remove any unnecessary images and build any missing ones:

```
npx next-img
```

Now check in the `resources` directory to your source control to be reused later for development and production builds. You can turn this feature off by setting `persistentCache: false` in the plugin configuration, in which case the images will be only stored in a temporary cache inside `.next` directory.
