<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/next-img/_next/static/rz233XiIQaEiHguidOIHw/pages/index.js" as="script"/><link rel="preload" href="/next-img/_next/static/rz233XiIQaEiHguidOIHw/pages/_app.js" as="script"/><link rel="preload" href="/next-img/_next/static/runtime/webpack-b65cab0b00afd201cbda.js" as="script"/><link rel="preload" href="/next-img/_next/static/chunks/framework.77b03a17a886a3e349d2.js" as="script"/><link rel="preload" href="/next-img/_next/static/chunks/commons.df89ade4176b41f65fe0.js" as="script"/><link rel="preload" href="/next-img/_next/static/chunks/0807da812d6075ef691afabf6d1910204aa35a05.258600e99a5ea76ba804.js" as="script"/><link rel="preload" href="/next-img/_next/static/chunks/7ce7c5b4a72de429c8633d0b8d0a08360a62136c.3c6807c654960dc30cba.js" as="script"/><link rel="preload" href="/next-img/_next/static/runtime/main-b5a6c38129126a66155b.js" as="script"/><style id="__jsx-3995076446">.intro.jsx-3995076446{background:#f9f7f0;padding:160px 0;}.container.jsx-3995076446{max-width:780px;margin:auto;}</style><style id="__jsx-3198522465">.header.jsx-3198522465{background:#f9f7f0;border-bottom:1px solid #382fc510;}.header-inner.jsx-3198522465{max-width:780px;margin:auto;padding:20px 0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}.nav.jsx-3198522465{list-style:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;padding:0;}.nav.jsx-3198522465 a.jsx-3198522465{display:block;padding:8px 20px;-webkit-text-decoration:none;text-decoration:none;border-radius:4px;-webkit-transition:all 200ms;transition:all 200ms;color:#382fc5;}.nav.jsx-3198522465 a.jsx-3198522465:hover{background:#382fc510;}</style><style id="__jsx-3935999381">@import url('https://fonts.googleapis.com/css2?family=Merriweather:wght@900&display=swap');@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap');@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap');{/*! Typebase.less v0.1.0 | MIT License */}html,body{padding:0;margin:0;}a,a:visited{color:#07f;}pre{overflow:auto;font-size:13px;font-family:'Source Code Pro',monospace;font-weight:500;padding:20px !important;border-radius:8px;}p code,li code{background:#382fc520;font-size:15px;font-family:'Source Code Pro',monospace;font-weight:500;padding:4px 4px;border-radius:4px;}img{max-width:100%;border-radius:8px;}html{font-family:'Inter',sans-serif;font-size:100%;-webkit-font-smoothing:antialiased;}p{line-height:1.5rem;margin-top:1.5rem;margin-bottom:0;}ul,ol{margin-top:1.5rem;margin-bottom:1.5rem;}ul li,ol li{line-height:1.5rem;}ul ul,ol ul,ul ol,ol ol{margin-top:0;margin-bottom:0;}blockquote{line-height:1.5rem;margin-top:1.5rem;margin-bottom:1.5rem;}h1,h2,h3,h4,h5,h6{font-family:'Inter',sans-serif;margin-top:3rem;margin-bottom:0;line-height:1.5rem;}h1{font-size:2.828rem;line-height:3rem;margin-top:3rem;}h2{font-size:1.414rem;}h3{font-size:1.107rem;}h4{font-size:1.0713333333333333rem;}h5{font-size:0.3535rem;}table{margin-top:1.5rem;border-spacing:0px;border-collapse:collapse;}table td,table th{padding:0;line-height:33px;}code{vertical-align:bottom;}.lead{font-size:1.414rem;}.hug{margin-top:0;}</style></head><body><div id="__next"><div class="jsx-3198522465"><div class="jsx-3198522465 header"><div class="jsx-3198522465 header-inner"><div class="jsx-3198522465"><a class="jsx-3198522465" href="/"><img src="https://user-images.githubusercontent.com/324440/84085849-5f9a4100-a9de-11ea-94c4-bbfbdc8a0a16.png" alt="next-img" title="next-img" width="200" class="jsx-3198522465"/></a></div><ul class="jsx-3198522465 nav"><li class="jsx-3198522465"><a class="jsx-3198522465" href="/">Intro</a></li><li class="jsx-3198522465"><a class="jsx-3198522465" href="/usage">Usage</a></li><li class="jsx-3198522465"><a class="jsx-3198522465" href="/reference">Reference</a></li><li class="jsx-3198522465"><a class="jsx-3198522465" href="/examples">Examples</a></li></ul></div></div><div class="content" class="jsx-3198522465"><div class="jsx-3995076446 intro"><div class="jsx-3995076446 container"><h1 align="center" style="margin-top:0;margin-bottom:180px">Next.js plugin for embedding optimized images</h1><h2>Features</h2><ul><li><strong>import</strong> png/jpg images</li><li><strong>resize</strong> to multiple screen sizes and densities</li><li><strong>modernize</strong> by converting to webp format</li><li><strong>optimize</strong> file sizes using <code>sharp</code></li><li><strong>streamlined usage</strong> with the built in <code>&lt;Picture /&gt;</code> component</li><li><strong>art direction</strong> with different images for different breakpoints</li><li><strong>fast</strong> deployment and development workflow using persistent cache</li></ul><p>By default <strong>next-img</strong> is configured to use:</p><ul><li>1 breakpoint at <code>768px</code></li><li>2 pixel densities of 1x, 2x</li><li>to output the original and webp formats</li></ul><p>All of these settings and more can be changed in your <code>next.config.js</code> or in the individual image imports.</p><p>Developed and used by <a href="https://humaans.io/">Humaans</a>.</p><h2>Motivation</h2><p>By default Next.js or Webpack doesn&#x27;t help you much with optimizing images. This means custom configuration or scripting, processing images by hand, using an image CDN or not optimising images at all. <strong>next-img</strong> provides and alternative streamlined approach for adding images to your Next.js projects. It combines a Next.js plugin, a custom webpack loader and a React component to make serving images in an optimal fashion in a way that is almost as easy as typing <code>&lt;img src=&#x27;foo.png&#x27; /&gt;</code>.</p><p>In short, it takes the following:</p><div><pre class="language-js" style="display:block;overflow-x:auto;padding:0.5em;background:#232323;color:#e6e1dc"><code><span style="color:#e8bf6a">&lt;<span style="color:#e8bf6a">Picture</span> <span style="color:#6d9cbe">src</span>=<span style="color:#a5c261">{require(</span>&#x27;<span style="color:#6d9cbe">.</span>/<span style="color:#6d9cbe">images</span>/<span style="color:#6d9cbe">jelly.jpg</span>?<span style="color:#6d9cbe">sizes</span>=<span style="color:#a5c261">375,800</span>&#x27;)} /&gt;</span>
</code></pre></div><p>Imports, resizes, optimizes, caches (persistently in the git repo) and outputs the following HTML:</p><div><pre class="language-html" style="display:block;overflow-x:auto;padding:0.5em;background:#232323;color:#e6e1dc"><code><span style="color:#e8bf6a">&lt;<span style="color:#e8bf6a">picture</span>&gt;</span>
  <span style="color:#e8bf6a">&lt;<span style="color:#e8bf6a">source</span>
    <span style="color:#6d9cbe">type</span>=<span style="color:#a5c261">&quot;image/webp&quot;</span>
    <span style="color:#6d9cbe">srcset</span>=<span style="color:#a5c261">&quot;
      /_next/static/images/jelly-375@1x-5e609945b16eba99bf2aaa3007d3ba92.webp  375w,
      /_next/static/images/jelly-375@2x-850e7fd87fceda1e7cefcb628a07f5c4.webp  750w,
      /_next/static/images/jelly-800@1x-1481a104c8ce38822aeafdbe97a17e69.webp  800w,
      /_next/static/images/jelly-800@2x-fc18765bd3b819714ca2da58e10907c9.webp 1600w
    &quot;</span>
    <span style="color:#6d9cbe">sizes</span>=<span style="color:#a5c261">&quot;(max-width: 768px) 375px, 800px&quot;</span>
  /&gt;</span>
  <span style="color:#e8bf6a">&lt;<span style="color:#e8bf6a">source</span>
    <span style="color:#6d9cbe">type</span>=<span style="color:#a5c261">&quot;image/jpeg&quot;</span>
    <span style="color:#6d9cbe">srcset</span>=<span style="color:#a5c261">&quot;
      /_next/static/images/jelly-375@1x-259e4b1f32b3bdd4349806c4a5763a54.jpg  375w,
      /_next/static/images/jelly-375@2x-295d4cc8111d4e911dbc9ad4dd1d8322.jpg  750w,
      /_next/static/images/jelly-800@1x-090d866969aba9b237e71ee52512a7c4.jpg  800w,
      /_next/static/images/jelly-800@2x-33f1639cadf8c4c5f19eb5c19e20a67d.jpg 1600w
    &quot;</span>
    <span style="color:#6d9cbe">sizes</span>=<span style="color:#a5c261">&quot;(max-width: 768px) 375px, 800px&quot;</span>
  /&gt;</span>

  <span style="color:#e8bf6a">&lt;<span style="color:#e8bf6a">img</span>
    <span style="color:#6d9cbe">src</span>=<span style="color:#a5c261">&quot;/_next/static/images/jelly-375@1x-259e4b1f32b3bdd4349806c4a5763a54.jpg&quot;</span>
    <span style="color:#6d9cbe">srcset</span>=<span style="color:#a5c261">&quot;
      /_next/static/images/jelly-375@1x-259e4b1f32b3bdd4349806c4a5763a54.jpg  375w,
      /_next/static/images/jelly-375@2x-295d4cc8111d4e911dbc9ad4dd1d8322.jpg  750w,
      /_next/static/images/jelly-800@1x-090d866969aba9b237e71ee52512a7c4.jpg  800w,
      /_next/static/images/jelly-800@2x-33f1639cadf8c4c5f19eb5c19e20a67d.jpg 1600w
    &quot;</span>
  /&gt;</span>
<span style="color:#e8bf6a">&lt;/<span style="color:#e8bf6a">picture</span>&gt;</span>
</code></pre></div><h2>Future</h2><p>Short term roadmap:</p><h3>V1:</h3><ul class="contains-task-list"><li class="task-list-item"><input type="checkbox" checked="" disabled=""/> <!-- -->Allow different config for <code>jpg-&gt;webp</code> and <code>png-&gt;webp</code> conversions</li><li class="task-list-item"><input type="checkbox" disabled=""/> <!-- -->Allow turning <code>webp/jpg/png</code> output off</li><li class="task-list-item"><input type="checkbox" disabled=""/> <!-- -->Add <code>?raw</code> query support that doesnâ€™t process the image in any way</li><li class="task-list-item"><input type="checkbox" disabled=""/> <!-- -->Remove the need for <code>next-img</code> command by plugging directly into <code>next build</code> via webpack plugin</li></ul><h3>V2:</h3><ul class="contains-task-list"><li class="task-list-item"><input type="checkbox" disabled=""/> <!-- -->Add support for css images, in addition to the html images</li><li class="task-list-item"><input type="checkbox" disabled=""/> <!-- -->Inline small images</li></ul><p>And some ideas for where this project could be taken in the future:</p><ul><li>Allow adding <code>imagemin</code> optimisation plugins into the pipeline via config. This way users can control how to optimise their images more granuarly.</li><li>Translate relative sizes <code>?sizes=100vw,50vw,900px</code> to pixels based on the breakpoint configuration, this would allow dynamic kind of imports that depend on your design system and relative sizing of images, e.g. if css says &quot;50vw&quot;, you will not need to do that calculation manually.</li><li>Debug mode that prints image sizes into images themselves, so you can see what&#x27;s shown when right in the browser inside images (or overlaying them using js at runtime).</li><li>Babel parser that analyses code for images to avoid the need to <code>require()</code>.</li><li>Optimize file read/write/hash operations to the maximum for improved performance.</li><li>A puppeteer script to render the website in all predefined breakpoints and automatically analyses all image sizes required.</li><li>Add support for gif and webp as source images.</li></ul></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/","query":{},"buildId":"rz233XiIQaEiHguidOIHw","assetPrefix":"/next-img","nextExport":true,"autoExport":true,"isFallback":false}</script><script nomodule="" src="/next-img/_next/static/runtime/polyfills-ac8b02fa82de57111615.js"></script><script async="" data-next-page="/" src="/next-img/_next/static/rz233XiIQaEiHguidOIHw/pages/index.js"></script><script async="" data-next-page="/_app" src="/next-img/_next/static/rz233XiIQaEiHguidOIHw/pages/_app.js"></script><script src="/next-img/_next/static/runtime/webpack-b65cab0b00afd201cbda.js" async=""></script><script src="/next-img/_next/static/chunks/framework.77b03a17a886a3e349d2.js" async=""></script><script src="/next-img/_next/static/chunks/commons.df89ade4176b41f65fe0.js" async=""></script><script src="/next-img/_next/static/chunks/0807da812d6075ef691afabf6d1910204aa35a05.258600e99a5ea76ba804.js" async=""></script><script src="/next-img/_next/static/chunks/7ce7c5b4a72de429c8633d0b8d0a08360a62136c.3c6807c654960dc30cba.js" async=""></script><script src="/next-img/_next/static/runtime/main-b5a6c38129126a66155b.js" async=""></script><script src="/next-img/_next/static/rz233XiIQaEiHguidOIHw/_buildManifest.js" async=""></script><script src="/next-img/_next/static/rz233XiIQaEiHguidOIHw/_ssgManifest.js" async=""></script></body></html>